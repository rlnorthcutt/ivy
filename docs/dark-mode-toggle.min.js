/*!
 * Dark Mode Toggle Web Element
 * Version: 1.0.0
 * URL: https://github.com/rlnorthcutt/dark-mode-toggle
 * License: MIT (https://opensource.org/licenses/MIT)
 */
(()=>{"use strict";const t=document.createElement("template");t.innerHTML='\n    <button part="button" class="track" type="button" role="switch" aria-checked="false" aria-label="Toggle dark mode">\n      <span class="icon sun" part="sun" aria-hidden="true"><slot name="sun">\n    <svg viewBox="0 0 24 24" aria-hidden="true">\n      <path d="M18.1 5.1c0 .3-.1.6-.3.9l-1.4 1.4-.9-.8 2.2-2.2c.3.1.4.4.4.7zm-.5 5.3h3.2c0 .3-.1.6-.4.9s-.5.4-.8.4h-2v-1.3zm-6.2-5V2.2c.3 0 .6.1.9.4s.4.5.4.8v2h-1.3zm6.4 11.7c-.3 0-.6-.1-.8-.3l-1.4-1.4.8-.8 2.2 2.2c-.2.2-.5.3-.8.3zM6.2 4.9c.3 0 .6.1.8.3l1.4 1.4-.8.9-2.2-2.3c.2-.2.5-.3.8-.3zm5.2 11.7h1.2v3.2c-.3 0-.6-.1-.9-.4s-.4-.5-.4-.8l.1-2zm-7-6.2h2v1.2H3.2c0-.3.1-.6.4-.9s.5-.3.8-.3zM6.2 16l1.4-1.4.8.8-2.2 2.2c-.2-.2-.3-.5-.3-.8s.1-.6.3-.8z"/>\n      <circle cx="12" cy="11" r="4"/>\n    </svg>\n  </slot></span>\n      <span class="icon moon" part="moon" aria-hidden="true"><slot name="moon">\n    <svg viewBox="0 0 20 20" aria-hidden="true">\n      <path d="M17.39 15.14A7.33 7.33 0 0 1 11.75 1.6c.23-.11.56-.23.79-.34a8.19 8.19 0 0 0-5.41.45 9 9 0 1 0 7 16.58 8.42 8.42 0 0 0 4.29-3.84 5.3 5.3 0 0 1-1.03.69z"/>\n    </svg>\n  </slot></span>\n      <span class="thumb" part="thumb" aria-hidden="true"></span>\n    </button>\n  ';const e=new CSSStyleSheet;e.replaceSync('\n    :host{display:inline-block;vertical-align:middle;color-scheme:light dark}\n    .track{cursor:pointer;display:flex;align-items:center;justify-content:space-around;padding:0 4px;\n      width:var(--track-width,60px);height:var(--track-height,30px);background:var(--track-bg-light,#E9E9EA);\n      border-radius:30px;position:relative;border:0;outline:none;transition:background-color .25s ease}\n    .track:focus-visible{outline:2px solid color-mix(in oklab, CanvasText 30%, transparent);outline-offset:2px}\n    .thumb{position:absolute;top:2px;left:2px;width:calc(var(--track-height,30px) - 4px);height:calc(var(--track-height,30px) - 4px);\n      background:var(--thumb-bg,#fff);border-radius:50%;box-shadow:0 1px 3px rgba(0,0,0,.2);\n      transition:transform .25s cubic-bezier(.25,.46,.45,.94),background-color .25s ease}\n    .icon{display:inline-flex;align-items:center;justify-content:center;\n      width:calc(var(--track-height,30px) - 8px);height:calc(var(--track-height,30px) - 8px);pointer-events:none;z-index:1}\n    .icon svg{width:100%;height:100%;fill:currentColor;transition:color .25s ease,fill .25s ease}\n    .sun{color:var(--icon-sun-color,#000)}\n    .moon{color:var(--icon-moon-color,#8E8E93)}\n    :host([_state="dark"]) .track{background:var(--track-bg-dark,#4D4D52)}\n    :host([_state="dark"]) .thumb{transform:translateX(calc(var(--track-width,60px) - var(--track-height,30px)));background:var(--thumb-bg-dark,#6E6E73)}\n    :host([_state="dark"]) .sun{color:var(--icon-sun-color-inactive,#8E8E93)}\n    :host([_state="dark"]) .moon{color:var(--icon-moon-color-active,#fff)}\n    @media (prefers-reduced-motion:reduce){.thumb,.track,.icon svg{transition:none}}\n  ');const s="dm:theme",r=s,a=matchMedia("(prefers-color-scheme: dark)"),n=t=>t&&"html"!==t&&document.querySelector(t)||document.documentElement;let o;try{o=new BroadcastChannel(r)}catch{}class i extends HTMLElement{static get observedAttributes(){return["theme","strategy","root","dark-class","persist"]}constructor(){super();const s=this.attachShadow({mode:"open",delegatesFocus:!0});s.adoptedStyleSheets=[e],s.appendChild(t.content.cloneNode(!0)),this._btn=s.querySelector("button"),this._mo=new MutationObserver(()=>this._reflectFromRoot()),this._onClick=this._onClick.bind(this),this._onKey=this._onKey.bind(this),this._onStorage=this._onStorage.bind(this),this._onMQ=()=>this._apply(),this._onBC=t=>{"themechange"===t?.data?.type&&this._applyFromExternal(t.data.mode)}}connectedCallback(){this.hasAttribute("theme")||this.setAttribute("theme","auto"),this.hasAttribute("strategy")||this.setAttribute("strategy","attr"),this.hasAttribute("dark-class")||this.setAttribute("dark-class","dark"),this._btn.addEventListener("click",this._onClick),this._btn.addEventListener("keydown",this._onKey),window.addEventListener("storage",this._onStorage),a.addEventListener?.("change",this._onMQ),o?.addEventListener?.("message",this._onBC),this._initFromRootOrStorage(),this._apply(),this._observeRoot(!0)}disconnectedCallback(){this._btn.removeEventListener("click",this._onClick),this._btn.removeEventListener("keydown",this._onKey),window.removeEventListener("storage",this._onStorage),a.removeEventListener?.("change",this._onMQ),o?.removeEventListener?.("message",this._onBC),this._observeRoot(!1)}attributeChangedCallback(){this._apply()}get theme(){return(this.getAttribute("theme")||"auto").toLowerCase()}set theme(t){this.setAttribute("theme",t)}get strategy(){return(this.getAttribute("strategy")||"attr").toLowerCase()}get rootSelector(){return this.getAttribute("root")||"html"}get darkClass(){return this.getAttribute("dark-class")||"dark"}get persist(){return"off"!==this.getAttribute("persist")}_onClick(){const t="dark"===this._current()?"light":"dark";if(this.theme=t,this.persist)try{localStorage.setItem(s,t)}catch{}this._broadcast(t),this._apply()}_onKey(t){" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),this._onClick())}_onStorage(t){t.key===s&&(this.theme=t.newValue??"auto")}_current(){const t=this.theme;if("light"===t||"dark"===t)return t;try{const t=localStorage.getItem(s);if("light"===t||"dark"===t)return t}catch{}const e=n(this.rootSelector);if("class"===this.strategy){if(e.classList.contains(this.darkClass))return"dark"}else if("dark"===e.getAttribute("data-theme"))return"dark";return a.matches?"dark":"light"}_apply(){const t=this._current();this.toggleAttribute("_state",!1),this.setAttribute("_state",t),this._btn.setAttribute("aria-checked",String("dark"===t));const e=n(this.rootSelector);"class"===this.strategy?(e.classList.toggle(this.darkClass,"dark"===t),e===document.documentElement&&document.documentElement.removeAttribute("data-theme")):("dark"===t?e.setAttribute("data-theme","dark"):e.removeAttribute("data-theme"),e.classList.remove(this.darkClass)),e===document.documentElement&&(document.documentElement.style.colorScheme=t),this.dispatchEvent(new CustomEvent("change",{detail:{mode:t}}))}_broadcast(t){try{o?.postMessage({type:"themechange",mode:t})}catch{}window.dispatchEvent(new CustomEvent("themechange",{detail:{mode:t}}))}_applyFromExternal(t){if(("light"===t||"dark"===t)&&(this.theme=t,this.persist))try{localStorage.setItem(s,t)}catch{}this._apply()}_initFromRootOrStorage(){const t=n(this.rootSelector);let e=null;if("class"===this.strategy?t.classList.contains(this.darkClass)&&(e="dark"):"dark"===t.getAttribute("data-theme")&&(e="dark"),e&&this.persist)try{localStorage.setItem(s,e)}catch{}}_observeRoot(t){const e=n(this.rootSelector);e&&(t?this._mo.observe(e,{attributes:!0,attributeFilter:"class"===this.strategy?["class"]:["data-theme"]}):this._mo.disconnect())}_reflectFromRoot(){if("auto"!==this.theme)return;const t=n(this.rootSelector),e="class"===this.strategy?t.classList.contains(this.darkClass):"dark"===t.getAttribute("data-theme");this.setAttribute("_state",e?"dark":"light"),this._btn.setAttribute("aria-checked",String(e)),t===document.documentElement&&(document.documentElement.style.colorScheme=e?"dark":"light")}}customElements.define("dark-mode-toggle",i)})();
